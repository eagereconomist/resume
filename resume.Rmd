--- 
name: "Eric Miller"
aboutme: "Detail-oriented data analyst with a strong background in economics and quantitative analysis.
         Proficient in Python, R, SQL, EViews, and JMP Pro, with proven expertise in time-series econometrics and forecasting methods. 
         Adept at identifying strategic opportunities to enhance company margins and maximize profitability through comprehensive, data-driven analysis."
output:
  pagedown::html_paged:
    css: compact.css
    self_contained: true
    toc: false
    number_sections: false
    fig_caption: false
    includes:
      in_header: header.html
params:
  role: "data_analyst"
  show_academic: false
  max_bullets: 3
---

<div class="centered-header">
  <h1>Eric Miller</h1>
  <p class="contact-info">
    <a href="mailto:ericmiller@callutheran.edu">email</a>&nbsp;|&nbsp;
    <a href="tel:+17148120003">+1 (714) 812-0003</a>&nbsp;|&nbsp;
    <a href="https://www.linkedin.com/in/eric-miller-20a162224/">LinkedIn</a>&nbsp;|&nbsp;
    <a href="https://github.com/eagereconomist">GitHub</a>
  </p>
</div>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
`%||%` <- function(x, y) if (!is.null(x)) x else y
source("data/shared.R", local = TRUE)
role_file <- file.path("data", "roles", paste0(params$role, ".R"))
if (!file.exists(role_file)) stop("Missing role file: ", role_file)
source(role_file, local = TRUE)
SHOW_ACADEMIC <- isTRUE(params$show_academic)
MAX_BULLETS <- params$max_bullets %||% 3
```

```{r, results='asis'}
cat(glue::glue("**{rmarkdown::metadata$name} {rmarkdown::metadata$surname}**  
{rmarkdown::metadata$phone} | {rmarkdown::metadata$email} | [LinkedIn]({rmarkdown::metadata$linkedin} | {rmarkdown::metadata$github})  
"))
```

**About Me**  
```{r, results='asis'}
cat(glue::glue("{rmarkdown::metadata$aboutme}\n\n"))
```

**Experience**  
```{r, results='asis'}
entries <- if (!is.null(role_data$experience_override)) role_data$experience_override else professional_experience

# Group by job title, unit, location, and dates
by_job <- split(entries, paste(entries$title, entries$unit, entries$where, entries$startMonth, entries$startYear, entries$endMonth, entries$endYear))

for (group_key in names(by_job)) {
  group <- by_job[[group_key]]
  e <- group[1, ]

  # Title + City line
  cat(glue::glue(
    '<div class="exp-title-line">
      <div class="exp-title">{e$title}</div>
      <div class="exp-city">{e$where}</div>
    </div>\n'
  ))

  # Employer + date line
  cat(glue::glue(
    '<div class="exp-meta-line">
      <div class="exp-org">{e$unit}</div>
      <div class="exp-dates">{e$startMonth} {e$startYear} - {e$endMonth} {e$endYear}</div>
    </div>\n'
  ))

  # Bullet points
  cat("<ul class='exp-bullets'>\n")
  for (i in seq_len(nrow(group))) {
    detail <- group$detail[i]
    cat(glue::glue("<li>{detail}</li>\n"))
  }
  cat("</ul>\n\n")
}
```

**Skills**  
```{r, results='asis'}
skills_tbl <- if (!is.null(role_data$skills_tbl)) role_data$skills_tbl else skills
for (i in seq_len(nrow(skills_tbl))) {
  s <- skills_tbl[i, ]
  glue::glue("**{s$area}:** {s$skills}\n") |> cat("\n")
}
```

**Projects**  
```{r, results='asis'}
if (exists("projects") && is.data.frame(projects)) {
  for (i in seq_len(nrow(projects))) {
    p <- projects[i, ]

    title <- p$title %||% p$area
    when <- p$when %||% paste(p$endMonth, p$year)
    detail <- p$detail %||% p$accomplishment

    # Header line
    cat(glue::glue(
      '<div class="proj-header">
         <div class="proj-title">{title}</div>
         <div class="proj-date">{when}</div>
       </div>\n'
    ))

    # Bullet
    if (!is.na(detail) && nzchar(detail)) {
      cat("<ul class='proj-bullets'>\n")
      cat(glue::glue("<li>{detail}</li>\n"))
      cat("</ul>\n\n")
    }
  }
}
```

**Certifications**  

**Education**  
```{r, results='asis'}
if (exists("education") && is.data.frame(education)) {
  for (i in seq_len(nrow(education))) {
    e <- education[i, ]

    # Degree + dates line
    cat(glue::glue(
      '<div class="edu-header">
         <div class="edu-degree">{e$degree}</div>
         <div class="edu-dates">{e$startMonth} {e$startYear} - {e$endMonth} {e$endYear}</div>
       </div>\n'
    ))

    # Institution line
    cat(glue::glue('<div class="edu-inst">{e$inst}</div>\n'))

    # Optional bullet (minor, thesis, etc.)
    if (!is.na(e$detail) && nzchar(e$detail)) {
      cat("<ul class='edu-bullets'>\n")
      cat(glue::glue("<li>{e$detail}</li>\n"))
      cat("</ul>\n")
    }

    cat("<br>\n")  # spacing between entries
  }
}
```

**Education**  
```{r, results='asis'}
for (i in seq_len(nrow(education))) {
  e <- education[i, ]
  glue::glue("- **{e$degree}**, {e$inst} (*{e$startMonth} {e$startYear} - {e$endMonth} {e$endYear}*)  
{if (!is.na(e$detail)) paste0('- ', e$detail) else ''}\n") |> cat("\n")
}
```
